<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Redux状态管理</title>
      <link href="2021/04/02/Redux%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/"/>
      <url>2021/04/02/Redux%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<blockquote><p> <strong>学习文档</strong></p></blockquote><p>​    ⦁    英文文档: <a href="https://redux.js.org/">https://redux.js.org/</a></p><p>​    ⦁    中文文档: <a href="http://www.redux.org.cn/">http://www.redux.org.cn/</a></p><p>​    ⦁    Github: <a href="https://github.com/reactjs/redux">https://github.com/reactjs/redux</a></p><blockquote><p><strong>redux是什么</strong></p></blockquote><p>​    ⦁    redux是一个专门用于做状态管理的JS库(不是react插件库)。</p><p>​    ⦁    它可以用在react, angular, vue等项目中, 但基本与react配合使用。</p><p>​    ⦁    作用: 集中式管理react应用中多个组件共享的状态。</p><blockquote><p><strong>redux工作原理图</strong></p></blockquote><p><img src= "/img/loading.gif" data-lazy-src="/img/Redux.png"></p><blockquote><p><strong>redux的三个核心概念</strong></p></blockquote><h3 id="1-action"><a href="#1-action" class="headerlink" title="1. action"></a>1. action</h3><p>​    ⦁    动作的对象<br>​    ⦁    包含2个属性<br>​    ⦁    type：标识属性, 值为字符串, 唯一, 必要属性<br>​    ⦁    data：数据属性, 值类型任意, 可选属性<br>​    ⦁    例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">type</span>: <span class="string">&#x27;ADD_STUDENT&#x27;</span>,<span class="attr">data</span>:&#123;<span class="attr">name</span>: <span class="string">&#x27;tom&#x27;</span>,<span class="attr">age</span>:<span class="number">18</span>&#125; &#125;</span><br></pre></td></tr></table></figure><h3 id="2-reducer"><a href="#2-reducer" class="headerlink" title="2. reducer"></a>2. reducer</h3><p>​    ⦁    用于初始化状态、加工状态。<br>​    ⦁    加工时，根据旧的state和action， 产生新的state的纯函数。</p><h3 id="3-store"><a href="#3-store" class="headerlink" title="3. store"></a>3. store</h3><p>​    ⦁    将state、action、reducer联系在一起的对象<br>​    ⦁    dispatch(action): 分发action, 触发reducer调用, 产生新的state<br>​    ⦁    subscribe(listener): 注册监听, 当产生了新的state时, 自动调用render()重新渲染页面</p><blockquote><p><strong>redux的试例</strong></p></blockquote><h3 id="1-创建一个store"><a href="#1-创建一个store" class="headerlink" title="1.创建一个store"></a>1.创建一个store</h3><ul><li>这里使用了一个加减算法的案例组件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">该文件专门用于暴露一个store对象，整个应用只有一个store对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//引入createStore，专门用于创建redux中最为核心的store对象</span></span><br><span class="line"><span class="keyword">import</span> &#123;createStore&#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="comment">//引入为Count组件服务的reducer</span></span><br><span class="line"><span class="keyword">import</span> countReducer <span class="keyword">from</span> <span class="string">&#x27;./count_reducer&#x27;</span></span><br><span class="line"><span class="comment">//暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(countReducer)</span><br></pre></td></tr></table></figure><h3 id="2-创建对应的动作类型和data对象数据"><a href="#2-创建对应的动作类型和data对象数据" class="headerlink" title="2. 创建对应的动作类型和data对象数据"></a>2. 创建对应的动作类型和data对象数据</h3><ul><li>提前声明一个常量代替变量，方便避免在单词复杂情况下，敲错变量导致报错。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">该模块是用于定义action对象中type类型的常量值，目的只有一个：便于管理的同时防止程序员单词写错</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> INCREMENT = <span class="string">&#x27;increment&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> DECREMENT = <span class="string">&#x27;decrement&#x27;</span></span><br></pre></td></tr></table></figure><ul><li>在组件中给action传递类型和数据</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加法</span></span><br><span class="line">increment = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;value&#125; = <span class="built_in">this</span>.selectNumber</span><br><span class="line">store.dispatch(createIncrementAction(value*<span class="number">1</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//减法</span></span><br><span class="line">decrement = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="keyword">const</span> &#123;value&#125; = <span class="built_in">this</span>.selectNumber</span><br><span class="line">store.dispatch(createDecrementAction(value*<span class="number">1</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>在由action整理好数据传递给reducer</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">该文件专门为Count组件生成action对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> &#123;INCREMENT,DECREMENT&#125; <span class="keyword">from</span> <span class="string">&#x27;./constant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createIncrementAction = <span class="function"><span class="params">data</span> =&gt;</span> (&#123;<span class="attr">type</span>:INCREMENT,data&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> createDecrementAction = <span class="function"><span class="params">data</span> =&gt;</span> (&#123;<span class="attr">type</span>:DECREMENT,data&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-创建对应组件功能的reducer"><a href="#3-创建对应组件功能的reducer" class="headerlink" title="3.创建对应组件功能的reducer"></a>3.创建对应组件功能的reducer</h3><ul><li>接收action的数据进行计算，最后将计算的结果保存回store</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">1.该文件是用于创建一个为Count组件服务的reducer，reducer的本质就是一个函数</span></span><br><span class="line"><span class="comment">2.reducer函数会接到两个参数，分别为：之前的状态(preState)，动作对象(action)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">import</span> &#123;INCREMENT,DECREMENT&#125; <span class="keyword">from</span> <span class="string">&#x27;./constant&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initState = <span class="number">0</span> <span class="comment">//初始化状态</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">countReducer</span>(<span class="params">preState=initState,action</span>)</span>&#123;</span><br><span class="line"><span class="comment">// console.log(preState);</span></span><br><span class="line"><span class="comment">//从action对象中获取：type、data</span></span><br><span class="line"><span class="keyword">const</span> &#123;type,data&#125; = action</span><br><span class="line"><span class="comment">//根据type决定如何加工数据</span></span><br><span class="line"><span class="keyword">switch</span> (type) &#123;</span><br><span class="line"><span class="keyword">case</span> INCREMENT: <span class="comment">//如果是加</span></span><br><span class="line"><span class="keyword">return</span> preState + data</span><br><span class="line"><span class="keyword">case</span> DECREMENT: <span class="comment">//若果是减</span></span><br><span class="line"><span class="keyword">return</span> preState - data</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">return</span> preState</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-取出结果和再次渲染页面"><a href="#4-取出结果和再次渲染页面" class="headerlink" title="4 .取出结果和再次渲染页面"></a>4 .取出结果和再次渲染页面</h3><ul><li>可以通过**store.getState()**方法获得数据在reducer初始化的值</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;当前求和为：&#123;store.getState()&#125;&lt;/h1&gt;</span><br><span class="line">&lt;select ref=&#123;<span class="function"><span class="params">c</span> =&gt;</span> <span class="built_in">this</span>.selectNumber = c&#125;&gt;</span><br><span class="line">&lt;option value=<span class="string">&quot;1&quot;</span>&gt;<span class="number">1</span>&lt;/option&gt;</span><br><span class="line">&lt;option value=<span class="string">&quot;2&quot;</span>&gt;<span class="number">2</span>&lt;/option&gt;</span><br><span class="line">&lt;option value=<span class="string">&quot;3&quot;</span>&gt;<span class="number">3</span>&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;&amp;nbsp;</span><br><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.increment&#125;&gt;+&lt;/button&gt;&amp;nbsp;</span><br><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.decrement&#125;&gt;-&lt;/button&gt;&amp;nbsp;</span><br></pre></td></tr></table></figure><ul><li>可以在我们的根组件设置数据更新时渲染整个页面，当然因为虚拟DOM的diff算法，所以这样并不会因为渲染整个页面而降低性能。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./redux/store&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"></span><br><span class="line">store.subscribe(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>,<span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 状态管理 </tag>
            
            <tag> Redux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>canvas画布</title>
      <link href="2021/03/31/canvas%E7%94%BB%E5%B8%83/"/>
      <url>2021/03/31/canvas%E7%94%BB%E5%B8%83/</url>
      
        <content type="html"><![CDATA[<p>canvas元素用于在网页上绘制图形。</p><h2 id="什么是canvas"><a href="#什么是canvas" class="headerlink" title="什么是canvas"></a>什么是canvas</h2><p><strong>HTML5 canvas</strong> 元素用于图形的绘制，通过脚本(通常是JavaScript)来完成.</p><p><strong>canvas</strong>标签只是图形容器，您必须使用脚本来绘制图形。</p><p>你可以通过多种方法使用canvas绘制路径,盒、圆、字符以及添加图像。</p><h2 id="浏览器支持"><a href="#浏览器支持" class="headerlink" title="浏览器支持"></a>浏览器支持</h2><p>表格中的数字表示支持<strong>canvas</strong>元素的第一个浏览器版本号。</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/llqzc.png" alt="浏览器支持"></p><h2 id="创建一个画布（Canvas）"><a href="#创建一个画布（Canvas）" class="headerlink" title="创建一个画布（Canvas）"></a>创建一个画布（Canvas）</h2><p>一个画布在网页中是一个矩形框，通过<strong>canvas</strong>元素来绘制.</p><p>注意:默认情况下<strong>canvas</strong>元素没有边框和内容。</p><p>canvas简单实例如下:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot;&gt;&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>注意: 标签通常需要指定一个id属性 (脚本中经常引用), width 和 height 属性定义的画布的大小.</p><p>提示:你可以在HTML页面中使用多个 <strong>canvas</strong>元素.</p><p>使用 style 属性来添加边框:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot;</span><br><span class="line">style&#x3D;&quot;border:1px solid #000000;&quot;&gt;</span><br><span class="line">&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/canvas.png" alt="创建一个画布（Canvas）"></p><h2 id="使用JavaScript来绘制图像"><a href="#使用JavaScript来绘制图像" class="headerlink" title="使用JavaScript来绘制图像"></a>使用JavaScript来绘制图像</h2><p>canvas元素本身是没有绘图能力的。所有的绘制工作必须在JavaScript内部完成：</p><p>HTML代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot; style&#x3D;&quot;border:1px solid #c3c3c3;&quot;&gt;</span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。</span><br><span class="line">&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.fillStyle&#x3D;&quot;#FF0000&quot;;</span><br><span class="line">ctx.fillRect(0,0,150,75);</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/mycanvas.png" alt="使用JavaScript来绘制图像"></p><p><strong>实例解析:</strong></p><p>首先，找到<strong>canvas</strong>元素:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br></pre></td></tr></table></figure><p>然后，创建 context 对象：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br></pre></td></tr></table></figure><p>getContext(“2d”) 对象是内建的 HTML5 对象，拥有多种绘制路径、矩形、圆形、字符以及添加图像的方法。</p><p>下面的两行代码绘制一个红色的矩形：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ctx.fillStyle&#x3D;&quot;#FF0000&quot;;</span><br><span class="line">ctx.fillRect(0,0,150,75);</span><br></pre></td></tr></table></figure><p>设置fillStyle属性可以是CSS颜色，渐变，或图案。fillStyle 默认设置是#000000（黑色）。</p><p>fillRect(x,y,width,height) 方法定义了矩形当前的填充方式。</p><h2 id="Canvas-坐标"><a href="#Canvas-坐标" class="headerlink" title="Canvas 坐标"></a>Canvas 坐标</h2><p>canvas 是一个二维网格。</p><p>canvas 的左上角坐标为 (0,0)</p><p>上面的 fillRect 方法拥有参数 (0,0,150,75)。</p><p>意思是：在画布上绘制 150×75 的矩形，从左上角开始 (0,0)。</p><p>坐标实例</p><p>如下图所示，画布的 X 和 Y 坐标用于在画布上对绘画进行定位。鼠标移动的矩形框上，显示定位坐标。</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/canvas.gif" alt="img"></p><h2 id="Canvas-路径"><a href="#Canvas-路径" class="headerlink" title="Canvas 路径"></a>Canvas 路径</h2><p>在Canvas上画线，我们将使用以下两种方法：</p><ul><li>moveTo(x,y)定义线条开始坐标</li><li>lineTo(x,y)定义线条结束坐标</li></ul><p>绘制线条我们必须使用到”ink”的方法，就像stroke().</p><p><strong>举例：</strong></p><p>定义开始坐标(0,0), 和结束坐标 (200,100)。然后使用 stroke() 方法来绘制线条:</p><p>HTML代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot; style&#x3D;&quot;border:1px solid #d3d3d3;&quot;&gt;</span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>javascript代码:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.moveTo(0,0);</span><br><span class="line">ctx.lineTo(200,100);</span><br><span class="line">ctx.stroke();</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/line.png" alt="在Canvas上画线"></p><p>在canvas中绘制圆形, 我们将使用以下javascript方法:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.arc(&lt;i&gt;x&lt;&#x2F;i&gt;,&lt;i&gt;y&lt;&#x2F;i&gt;,&lt;i&gt;r&lt;&#x2F;i&gt;,&lt;i&gt;sAngle&lt;&#x2F;i&gt;,&lt;i&gt;eAngle&lt;&#x2F;i&gt;,&lt;i&gt;counterclockwise&lt;&#x2F;i&gt;);</span><br></pre></td></tr></table></figure><p><strong>参数值</strong></p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>x</em></td><td align="left">圆的中心的 x 坐标。</td></tr><tr><td align="left"><em>y</em></td><td align="left">圆的中心的 y 坐标。</td></tr><tr><td align="left"><em>r</em></td><td align="left">圆的半径。</td></tr><tr><td align="left"><em>sAngle</em></td><td align="left">起始角，以弧度计。（弧的圆形的三点钟位置是 0 度）。</td></tr><tr><td align="left"><em>eAngle</em></td><td align="left">结束角，以弧度计。</td></tr><tr><td align="left"><em>counterclockwise</em></td><td align="left">可选。规定应该逆时针还是顺时针绘图。False = 顺时针，true = 逆时针。</td></tr></tbody></table><p><strong>定义和用法</strong></p><p>arc()方法创建弧/曲线（用于创建圆或部分圆）。</p><p>提示：如需通过arc()来创建圆，请把起始角设置为0，结束角设置为2*Math.PI。</p><p>提示：请使用stroke()或fill()方法在画布上绘制实际的弧。</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/arc.gif" alt="arc()方法创建弧/曲线"></p><ul><li>中心：arc(100,75,50,0<em>Math.PI,1.5</em>Math.PI)</li><li>起始角：arc(100,75,50,0,1.5*Math.PI)</li><li>结束角：arc(100,75,50,0<em>Math.PI,1.5</em>Math.PI)</li></ul><p>实际上我们在绘制圆形时使用了 “ink” 的方法, 比如 stroke() 或者 fill().</p><p><strong>实例</strong></p><p>使用arc()方法绘制一个圆:</p><p>HTML代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot; style&#x3D;&quot;border:1px solid #d3d3d3;&quot;&gt;</span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.beginPath();</span><br><span class="line">ctx.arc(95,50,40,0,2*Math.PI);</span><br><span class="line">ctx.stroke();</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/arc.png" alt="使用arc()方法绘制一个圆:"></p><h2 id="Canvas-文本"><a href="#Canvas-文本" class="headerlink" title="Canvas-文本"></a>Canvas-文本</h2><p>使用canvas绘制文本，重要的属性和方法如下：</p><p>font-定义字体</p><p>fillText(<em>text,x,y,maxWidth</em>)-在canvas上绘制实心的文本</p><p>strokeText(<em>text,x,y,maxWidth</em>)-在canvas上绘制空心的文本</p><p><strong>参数值</strong></p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>text</em></td><td align="left">规定在画布上输出的文本。</td></tr><tr><td align="left"><em>x</em></td><td align="left">开始绘制文本的 x 坐标位置（相对于画布）。</td></tr><tr><td align="left"><em>y</em></td><td align="left">开始绘制文本的 y 坐标位置（相对于画布）。</td></tr><tr><td align="left"><em>maxWidth</em></td><td align="left">可选。允许的最大文本宽度，以像素计。</td></tr></tbody></table><p><strong>使用fillText():</strong></p><p>实例</p><p>使用”Arial”字体在画布上绘制一个高30px的文字（实心）：</p><p>HTML代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot; style&#x3D;&quot;border:1px solid #d3d3d3;&quot;&gt;</span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.font&#x3D;&quot;30px Arial&quot;;</span><br><span class="line">ctx.fillText(&quot;Hello World&quot;,10,50);</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/filltext.png" alt="使用&quot;Arial&quot;字体在画布上绘制一个高30px的文字（实心）"></p><p><strong>使用strokeText():</strong></p><p>实例</p><p>使用”Arial”字体在画布上绘制一个高30px的文字（空心）：</p><p>HTML代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;200&quot; height&#x3D;&quot;100&quot; style&#x3D;&quot;border:1px solid #d3d3d3;&quot;&gt;</span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line">ctx.font&#x3D;&quot;30px Arial&quot;;</span><br><span class="line">ctx.strokeText(&quot;Hello World&quot;,10,50);</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/stroketext.png" alt="使用 &quot;Arial&quot; 字体在画布上绘制一个高 30px 的文字（空心）"></p><h2 id="Canvas-渐变"><a href="#Canvas-渐变" class="headerlink" title="Canvas-渐变"></a>Canvas-渐变</h2><p>渐变可以填充在矩形,圆形,线条,文本等等,各种形状可以自己定义不同的颜色。</p><p>以下有两种不同的方式来设置Canvas渐变：</p><p>createLinearGradient()方法创建线性的渐变对象。</p><p>提示：请使用 addColorStop() 方法规定不同的颜色，以及在 gradient 对象中的何处定位颜色。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">addColorStop()方法规定渐变对象中的颜色和位置。</span><br><span class="line"></span><br><span class="line">addColorStop()方法与createLinearGradient()或createRadialGradient()一起使用。</span><br><span class="line"></span><br><span class="line">注意：您可以多次调用addColorStop()方法来改变渐变。如果您不对渐变对象使用该方法，那么渐变将不可见。为了获得可见的渐变，您需要创建至少一个色标。</span><br><span class="line"></span><br><span class="line">JavaScript语法：gradient.addColorStop(stop,color);</span><br><span class="line"></span><br><span class="line">stop 介于0.0与1.0之间的值，表示渐变中开始与结束之间的位置。</span><br><span class="line"></span><br><span class="line">color 在stop位置显示的CSS颜色值。</span><br></pre></td></tr></table></figure><p>javascript语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createLinearGradient(x,y,x1,y1)</span><br></pre></td></tr></table></figure><p><strong>参数值</strong></p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>x</em></td><td align="left">渐变开始点的 x 坐标</td></tr><tr><td align="left"><em>y</em></td><td align="left">渐变开始点的 y 坐标</td></tr><tr><td align="left"><em>x1</em></td><td align="left">渐变结束点的 x 坐标</td></tr><tr><td align="left"><em>y1</em></td><td align="left">渐变结束点的 y 坐标</td></tr></tbody></table><p>createLinearGradient() 方法创建放射状/圆形渐变对象。</p><p>JavaScript 语法：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createRadialGradient(x0,y0,r0,x1,y1,r1);</span><br></pre></td></tr></table></figure><p><strong>参数值</strong></p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>x0</em></td><td align="left">渐变的开始圆的 x 坐标</td></tr><tr><td align="left"><em>y0</em></td><td align="left">渐变的开始圆的 y 坐标</td></tr><tr><td align="left"><em>r0</em></td><td align="left">开始圆的半径</td></tr><tr><td align="left"><em>x1</em></td><td align="left">渐变的结束圆的 x 坐标</td></tr><tr><td align="left"><em>y1</em></td><td align="left">渐变的结束圆的 y 坐标</td></tr><tr><td align="left"><em>r1</em></td><td align="left">结束圆的半径</td></tr></tbody></table><p>实例</p><p>使用createLinearGradient()创建一个线性渐变。使用渐变填充矩形:</p><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Create gradient</span><br><span class="line">var grd&#x3D;ctx.createLinearGradient(0,0,200,0);</span><br><span class="line">grd.addColorStop(0,&quot;red&quot;);</span><br><span class="line">grd.addColorStop(1,&quot;white&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Fill with gradient</span><br><span class="line">ctx.fillStyle&#x3D;grd;</span><br><span class="line">ctx.fillRect(10,10,150,80);</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/grd.png" alt="使用createLinearGradient()创建一个线性渐变"></p><p>实例</p><p>使用createRadialGradient()创建一个径向/圆渐变。使用渐变填充矩形：</p><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Create gradient</span><br><span class="line">var grd&#x3D;ctx.createRadialGradient(75,50,5,90,60,100);</span><br><span class="line">grd.addColorStop(0,&quot;red&quot;);</span><br><span class="line">grd.addColorStop(1,&quot;white&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Fill with gradient</span><br><span class="line">ctx.fillStyle&#x3D;grd;</span><br><span class="line">ctx.fillRect(10,10,150,80);</span><br></pre></td></tr></table></figure><p>效果展示：</p><p><img src= "/img/loading.gif" data-lazy-src="https://www.mybj123.com/wp-content/uploads/2018/09/grd2.png" alt="使用createRadialGradient()创建一个径向/圆渐变"></p><h2 id="Canvas-图像"><a href="#Canvas-图像" class="headerlink" title="Canvas 图像"></a>Canvas 图像</h2><p>把一幅图像放置到画布上, 使用以下方法:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drawImage(image,x,y)</span><br></pre></td></tr></table></figure><p>HTML代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;Image to use:&lt;&#x2F;p&gt;</span><br><span class="line">&lt;img id&#x3D;&quot;scream&quot; src&#x3D;&quot;img_the_scream.jpg&quot; alt&#x3D;&quot;The Scream&quot; width&#x3D;&quot;220&quot; height&#x3D;&quot;277&quot;&gt;</span><br><span class="line">&lt;p&gt;Canvas:&lt;&#x2F;p&gt;</span><br><span class="line">&lt;canvas id&#x3D;&quot;myCanvas&quot; width&#x3D;&quot;250&quot; height&#x3D;&quot;300&quot; style&#x3D;&quot;border:1px solid #d3d3d3;&quot;&gt;</span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。</span><br><span class="line">&lt;&#x2F;canvas&gt;</span><br></pre></td></tr></table></figure><p>javascript代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var c&#x3D;document.getElementById(&quot;myCanvas&quot;);</span><br><span class="line">var ctx&#x3D;c.getContext(&quot;2d&quot;);</span><br><span class="line">var img&#x3D;document.getElementById(&quot;scream&quot;);</span><br><span class="line"></span><br><span class="line">img.onload &#x3D; function() &#123;</span><br><span class="line">    ctx.drawImage(img,10,10);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 标签 </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue中computed和watch的用法和区别</title>
      <link href="2021/03/29/Vue%E4%B8%ADcomputed%E5%92%8Cwatch/"/>
      <url>2021/03/29/Vue%E4%B8%ADcomputed%E5%92%8Cwatch/</url>
      
        <content type="html"><![CDATA[<h1 id="Vue的computed-计算属性-与watch-监听属性-的用法用途"><a href="#Vue的computed-计算属性-与watch-监听属性-的用法用途" class="headerlink" title="Vue的computed(计算属性)与watch(监听属性)的用法用途"></a>Vue的computed(计算属性)与watch(监听属性)的用法用途</h1><h3 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h3><blockquote><p>computed在vue中起到<code>计算属性</code>作用。</p></blockquote><p><strong>用法</strong></p><p>HTML:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>firstName: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>lastName: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>name: &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Vue:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        firstName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        lastName: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;,</span><br><span class="line"> </span><br><span class="line">computed: &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">        <span class="function"><span class="title">set</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">//set值触发</span></span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.lastName + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.firstName</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// and</span></span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">    <span class="function"><span class="title">name</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.lastName + <span class="string">&#x27; &#x27;</span> + <span class="built_in">this</span>.firstName</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上是computed的基本用法。</p><p><strong>注意</strong>：<code>name</code>不能在data中声明</p><h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><blockquote><p>watch在vue起到<code>观察监听</code>的作用</p></blockquote><p><strong>用法</strong></p><p>Vue模板：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    <span class="comment">//我们在getFullName方法中改变了name的值，触发watch打印&#x27;invoked watch&#x27;</span></span><br><span class="line">      &lt;p&gt;firstName: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstName&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;getFullName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      &lt;p&gt;lastName: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastName&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;getFullName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      &lt;p&gt;name: &#123;&#123;name&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            firstName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            lastName: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            name: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    watch: &#123;</span><br><span class="line">        <span class="function"><span class="title">name</span>(<span class="params">newD, oldD</span>)</span> &#123;<span class="comment">//newD最新的值，oldD改变之前的值</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;invoked watch&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="function"><span class="title">getFullName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.name = <span class="built_in">this</span>.lastName + <span class="built_in">this</span>.firstName</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p> <strong>1.首次进入页面执行watch监听</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">      name: &#123;</span><br><span class="line">      <span class="function"><span class="title">handler</span>(<span class="params">newD, oldD</span>)</span> &#123;<span class="comment">//newD最新的值，oldD改变之前的值</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;invoked watch&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line">immediate: <span class="literal">true</span><span class="comment">//默认false(立即的、立刻)</span></span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>加上immediate进入就会监听一次，打印<code>invoked watch</code></p><p><strong>2.监听对象(深度监听)</strong></p><p>下面这种情况，我们输入年龄的时候，watch是监听不到的，因为<code>改变的是person.age</code>而不是<code>person</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">      &lt;p&gt;请输入年龄: <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;person.age&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">      &lt;p&gt;年龄: &#123;&#123;person.age&#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            person: &#123;</span><br><span class="line">                age: <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    watch: &#123;</span><br><span class="line">        person: &#123;</span><br><span class="line">            <span class="function"><span class="title">handler</span>(<span class="params">newD, oldD</span>)</span> &#123;<span class="comment">//newD最新的值，oldD改变之前的值</span></span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&#x27;invoked watch&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>解决办法：</p><ul><li>给watch配置<code>deep</code>属性（添加deep这种属性性能会有所消耗，如果对象有很多属性也会监听）</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    person: &#123;</span><br><span class="line">        <span class="function"><span class="title">handler</span>(<span class="params">newD, oldD</span>)</span> &#123;<span class="comment">//newD最新的值，oldD改变之前的值</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;invoked watch&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">deep: <span class="literal">true</span>   <span class="comment">//默认false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>监听你需要监听的属性</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    <span class="string">&quot;person.age&quot;</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">handler</span>(<span class="params">newD, oldD</span>)</span> &#123;<span class="comment">//newD最新的值，oldD改变之前的值</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;invoked watch&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>3.监听路由</strong> </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">      <span class="string">&quot;$route.path&quot;</span>: &#123;</span><br><span class="line">      <span class="comment">//可根据自己的需要判断当前路由的进入处理一些事情</span></span><br><span class="line">          <span class="function"><span class="title">handler</span>(<span class="params">newRouter, oldRouter</span>)</span> &#123;<span class="comment">//newD最新的路由路径值，oldD路由之前路径的值</span></span><br><span class="line">              <span class="built_in">console</span>.log(<span class="string">&#x27;invoked watch&#x27;</span>);</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h3><p><strong>computed</strong></p><ul><li><code>computed</code>适用于计算比较复杂中 </li><li><code>computed</code>在性能方面上比watch要好一点，因为具有缓存性</li><li><code>computed</code>是计算属性，所以更多用在数值计算的场景中 </li><li><code>computed</code>具有缓存性，之前get过的值之后会实惠缓存的，只有在它的依赖的属性值发生了变化，下次获取computed的值时才会重新调用对应的get重新计算</li></ul><p> <strong>watch</strong> </p><ul><li><code>watch</code>是监听观察的作用，类似于监听某些数据的回调，一般用于监听$emit/prop/data的值，当监听的数据发生改变做数据回调处理</li><li><code>watch</code>无缓存性，页面重新渲染时值不变化也会执行</li></ul>]]></content>
      
      
      <categories>
          
          <category> 框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> 框架 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue与React的生命周期钩子</title>
      <link href="2021/03/24/Vue%E4%B8%8EReact%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90/"/>
      <url>2021/03/24/Vue%E4%B8%8EReact%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<h1 id="一-vue的生命周期如下图所示-初始化、编译、更新、销毁"><a href="#一-vue的生命周期如下图所示-初始化、编译、更新、销毁" class="headerlink" title="一 vue的生命周期如下图所示    初始化、编译、更新、销毁"></a>一 vue的生命周期如下图所示    初始化、编译、更新、销毁</h1><p> <img src= "/img/loading.gif" data-lazy-src="/img/lifecycle-01.png" alt="img"></p><h1 id="二-vue生命周期的例子"><a href="#二-vue生命周期的例子" class="headerlink" title="二 vue生命周期的例子"></a>二 vue生命周期的例子</h1><p> 注意触发vue的created事件以后,this便指向vue实例,这点很重要</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">        &lt;title&gt;vue生命周期&lt;&#x2F;title&gt;</span><br><span class="line">        &lt;script src&#x3D;&quot;..&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">        &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width,initial-scale&#x3D;1,minimum-scale&#x3D;1,maximum-scale&#x3D;1,user-scalable&#x3D;no&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;test&quot; style&#x3D;&quot;border: 1px black dashed;padding: 8px;&quot;&gt;</span><br><span class="line">            &#123;&#123;a&#125;&#125;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;test2&quot; style&#x3D;&quot;border: 1px red solid;margin-top: 10px;padding: 8px;&quot;&gt;</span><br><span class="line">            我是内容二</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">        &lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt;</span><br><span class="line">            var myVue &#x3D; new Vue(&#123;</span><br><span class="line">                el: &quot;.test&quot;,</span><br><span class="line">                data: &#123;</span><br><span class="line">                    a: &quot;我是内容,在控制台输入myVue.a&#x3D;123456,可以改变我的值&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                beforeCreate: function () &#123;</span><br><span class="line">                    console.log(&quot;建立前&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                created: function () &#123; </span><br><span class="line">                    &#x2F;&#x2F;在实例创建之后同步调用。此时实例已经结束解析选项，这意味着已建立：数据绑定，计算属性，方法，watcher&#x2F;事件回调。</span><br><span class="line">                    &#x2F;&#x2F;但是还没有开始 DOM 编译，$el 还不存在,但是实例存在,即this.a存在,可打印出来 。</span><br><span class="line">                    console.log(&quot;建立&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                beforeMount: function () &#123;</span><br><span class="line">                    console.log(&quot;渲染前&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                mounted: function () &#123; </span><br><span class="line">                    console.log(&quot;渲染后&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                beforeUpdate: function () &#123;  </span><br><span class="line">                    console.log(&quot;更新前&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                updated: function () &#123; </span><br><span class="line">                    console.log(&quot;更新后&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                beforeDestroy: function () &#123;  &#x2F;&#x2F;触发方式,在console里面打myVue.$destroy();</span><br><span class="line">                    &#x2F;&#x2F;在开始销毁实例时调用。此时实例仍然有功能。</span><br><span class="line">                    console.log(&quot;销毁前&quot;);</span><br><span class="line">                &#125;,</span><br><span class="line">                destroyed: function () &#123;   &#x2F;&#x2F;触发方式,在console里面打myVue.$destroy();其中myVue.$destroy(true)是删除DOM节点,会触发detached函数,但是实例仍然存在</span><br><span class="line">                    &#x2F;&#x2F;在实例被销毁之后调用。此时所有的绑定和实例的指令已经解绑，注意是解绑不是销毁,所有的子实例也已经被销毁。</span><br><span class="line">                    console.log(&quot;已销毁&quot;);</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        &lt;&#x2F;script&gt;</span><br><span class="line">    &lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure><h1 id="一、react生命周期"><a href="#一、react生命周期" class="headerlink" title="一、react生命周期"></a>一、react生命周期</h1><p>React 生命周期分为三种状态 1. 初始化 2.更新 3.销毁</p><p><img src= "/img/loading.gif" data-lazy-src="/img/lifecycle-02.jpg" alt="img"></p><ul><li><strong>初始化</strong></li></ul><p>1、getDefaultProps()</p><blockquote><p>设置默认的props，也可以用ufaultProps设置组件的默认属性.</p></blockquote><p>2、getInitialState()</p><blockquote><p>在使用es6的class语法时是没有这个钩子函数的，可以直接在constructor中定义this.state。此时可以访问this.props</p></blockquote><p>3、componentWillMount()</p><blockquote><p>组件初始化时只调用，以后组件更新不调用，整个生命周期只调用一次，此时可以修改state。</p></blockquote><p>4、 render()</p><blockquote><p>react最重要的步骤，创建虚拟dom，进行diff算法，更新dom树都在此进行。此时就不能更改state了。</p></blockquote><p>5、componentDidMount()</p><blockquote><p>组件渲染之后调用，只调用一次。</p></blockquote><ul><li><strong>更新</strong></li></ul><p>6、componentWillReceiveProps(nextProps)</p><blockquote><p>组件初始化时不调用，组件接受新的props时调用。</p></blockquote><p>7、shouldComponentUpdate(nextProps, nextState)</p><blockquote><p>react性能优化非常重要的一环。组件接受新的state或者props时调用，我们可以设置在此对比前后两个props和state是否相同，如果相同则返回false阻止更新，因为相同的属性状态一定会生成相同的dom树，这样就不需要创造新的dom树和旧的dom树进行diff算法对比，节省大量性能，尤其是在dom结构复杂的时候</p></blockquote><p>8、componentWillUpdata(nextProps, nextState)</p><blockquote><p>组件初始化时不调用，只有在组件将要更新时才调用，此时可以修改state</p></blockquote><p>9、render()</p><blockquote><p>组件渲染</p></blockquote><p>10、componentDidUpdate()</p><blockquote><p>组件初始化时不调用，组件更新完成后调用，此时可以获取dom节点。</p></blockquote><ul><li><strong>卸载</strong></li></ul><p>11、componentWillUnmount()</p><blockquote><p>组件将要卸载时调用，一些事件监听和定时器需要在此时清除。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 框架 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>axios请求与接收</title>
      <link href="2021/03/21/axios%E8%AF%B7%E6%B1%82/"/>
      <url>2021/03/21/axios%E8%AF%B7%E6%B1%82/</url>
      
        <content type="html"><![CDATA[<h2 id="Axios是一个基于-promise-的-HTTP-库，可以用在浏览器和-node-js-中。"><a href="#Axios是一个基于-promise-的-HTTP-库，可以用在浏览器和-node-js-中。" class="headerlink" title="Axios是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。"></a><a href="http://axios-js.com/">Axios</a>是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</h2><h2 id="1-axios的基本使用"><a href="#1-axios的基本使用" class="headerlink" title="1. axios的基本使用"></a>1. axios的基本使用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行npm进行axios的安装</span></span><br><span class="line">npm install axios</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用默认方式发送请求  默认情况下发送GET请求</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">axios(&#123;</span><br><span class="line">    url:<span class="string">&#x27;请求路径&#x27;</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">            &#125;    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用GET 无参数 请求</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">axios(&#123;</span><br><span class="line">    url:<span class="string">&#x27;请求路径&#x27;</span>,</span><br><span class="line">    method:<span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">            &#125;    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用POST 无参数 请求</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">axios(&#123;</span><br><span class="line">    url:<span class="string">&#x27;请求路径&#x27;</span>,</span><br><span class="line">    method:<span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">&#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res);</span><br><span class="line">            &#125;)    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="2-参数的传递方法"><a href="#2-参数的传递方法" class="headerlink" title="2.参数的传递方法"></a>2.参数的传递方法</h2><h4 id="1-以下为Get请求传参"><a href="#1-以下为Get请求传参" class="headerlink" title="1.以下为Get请求传参"></a>1.以下为Get请求传参</h4><p>方法①：在axios的url当中直接添加参数，例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;?为分割路径和参数,id&#x3D;1 是需要传递的参数</span><br><span class="line">axios(&#123;</span><br><span class="line">    url:&#39;请求路径&#39;+&#39;?id&#x3D;1&#39;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>方法②：在axios的params当中添加参数，例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios(&#123;</span><br><span class="line">    url:&#39;请求路径&#39;,</span><br><span class="line">    params: &#123;</span><br><span class="line">    id:&#39;1&#39;,</span><br><span class="line">    name:&#39;张三&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="2-以下为Post请求传参"><a href="#2-以下为Post请求传参" class="headerlink" title="2.以下为Post请求传参"></a>2.以下为Post请求传参</h4><p>方法①：在axios的data中添加参数，例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;以下方法在后台控制器接收的name为nall。</span><br><span class="line">不过有三种解决方式：</span><br><span class="line">1.将data改为params。</span><br><span class="line">2.将内部键值对改为  &quot;name&#x3D;xxx&quot; 形式</span><br><span class="line">3.在服务器端给参数加上 @requestBody</span><br><span class="line"></span><br><span class="line">axios(&#123;</span><br><span class="line">    url:&#39;请求路径&#39;,</span><br><span class="line">    method:&#39;POST&#39;,</span><br><span class="line">    data: &#123;</span><br><span class="line">    id:&#39;1&#39;,</span><br><span class="line">    name:&#39;张三&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="3-axios的简写"><a href="#3-axios的简写" class="headerlink" title="3.axios的简写"></a>3.axios的简写</h2><p>Get：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.get(&#39;请求路径&#39;,&quot;name&#x3D;xxx&quot;).then(res)&#x3D;&gt;&#123;</span><br><span class="line">&#x2F;&#x2F;请求成功后执行</span><br><span class="line">console.log(res);</span><br><span class="line">&#125;.catch(err&#x3D;&gt;&#123;</span><br><span class="line">&#x2F;&#x2F;请求失败后执行</span><br><span class="line">console.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Post：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">axios.post(&#39;请求路径&#39;,&quot;name&#x3D;xxx&quot;).then(res)&#x3D;&gt;&#123;</span><br><span class="line">&#x2F;&#x2F;请求成功后执行</span><br><span class="line">console.log(res);</span><br><span class="line">&#125;.catch(err&#x3D;&gt;&#123;</span><br><span class="line">&#x2F;&#x2F;请求失败后执行</span><br><span class="line">console.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="4-axios的并发请求"><a href="#4-axios的并发请求" class="headerlink" title="4.axios的并发请求"></a>4.axios的并发请求</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过axios的spread方法处理响应数组的结果</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">axios.all([</span><br><span class="line">    axios.get(<span class="string">&#x27;请求1&#x27;</span>),</span><br><span class="line">axios.get(<span class="string">&#x27;请求2&#x27;</span>)</span><br><span class="line">]).then(</span><br><span class="line">    axios.spread(<span class="function">(<span class="params">res1,res2</span>)=&gt;</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(res1);</span><br><span class="line">                <span class="built_in">console</span>.log(res2);</span><br><span class="line">            &#125;)</span><br><span class="line">    ).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//请求失败后执行</span></span><br><span class="line"><span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="5-axios的全局配置"><a href="#5-axios的全局配置" class="headerlink" title="5.axios的全局配置"></a>5.axios的全局配置</h2><h4 id="1-全局配置下的网络请求"><a href="#1-全局配置下的网络请求" class="headerlink" title="1.全局配置下的网络请求"></a>1.全局配置下的网络请求</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过axios的spread方法处理响应数组的结果</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">axios.defaults.baseURL=<span class="string">&#x27;请求公用路径&#x27;</span>;</span><br><span class="line">axios.defaults.timeout=响应超时时间;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据默认请求配置，进行网络请求</span></span><br><span class="line">axios.get(<span class="string">&#x27;请求的详细路径&#x27;</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;);</span><br><span class="line">axios.post(<span class="string">&#x27;请求的详细路径&#x27;</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="2-配合实例化配置使用更香哦！！！"><a href="#2-配合实例化配置使用更香哦！！！" class="headerlink" title="2.配合实例化配置使用更香哦！！！"></a>2.配合实例化配置使用更香哦！！！</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过axios的spread方法处理响应数组的结果</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">let</span> newVar = axios.create(&#123;</span><br><span class="line">        axios.defaults.baseURL=<span class="string">&#x27;请求公用路径&#x27;</span>,</span><br><span class="line">axios.defaults.timeout=响应超时时间</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newVar1 = axios.create(&#123;</span><br><span class="line">        axios.defaults.baseURL=<span class="string">&#x27;请求公用路径&#x27;</span>,</span><br><span class="line">axios.defaults.timeout=响应超时时间</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据默认请求配置，进行网络请求</span></span><br><span class="line">newVar(&#123;</span><br><span class="line">        url:<span class="string">&#x27;请求的详细路径&#x27;</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">newVar1(&#123;</span><br><span class="line">        url:<span class="string">&#x27;请求的详细路径&#x27;</span></span><br><span class="line">    &#125;).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="6-拦截器"><a href="#6-拦截器" class="headerlink" title="6. 拦截器"></a>6. 拦截器</h2><p><strong>主要作用于网络请求发起和响应的时候进行操作处理，</strong></p><p><strong>发起请求的时候可以添加网页加载的动画，对用户的登入进行强制。</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//request(请求拦截器)response(响应拦截器)</span></span><br><span class="line"></span><br><span class="line">&lt;script src=<span class="string">&quot;https://unpkg.com/axios/dist/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">axios.interceptors.request 或者 response.use(<span class="function"><span class="params">config</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(config);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">&#125;,<span class="function"><span class="params">err</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">axios.get(<span class="string">&#x27;请求路径&#x27;</span>).then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>React的PubSub机制</title>
      <link href="2021/03/18/React%E7%9A%84PubSub%E6%9C%BA%E5%88%B6/"/>
      <url>2021/03/18/React%E7%9A%84PubSub%E6%9C%BA%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h1 id="React使用PubSub事件订阅，组件间通信"><a href="#React使用PubSub事件订阅，组件间通信" class="headerlink" title="React使用PubSub事件订阅，组件间通信"></a>React使用PubSub事件订阅，组件间通信</h1><h2 id="1-官网：https-github-com-mroderick-PubSubJS"><a href="#1-官网：https-github-com-mroderick-PubSubJS" class="headerlink" title="1.官网：https://github.com/mroderick/PubSubJS"></a>1.官网：<a href="https://github.com/mroderick/PubSubJS">https://github.com/mroderick/PubSubJS</a></h2><h3 id="1-简介"><a href="#1-简介" class="headerlink" title="1.简介"></a>1.简介</h3><p>​    <a href="https://github.com/mroderick/PubSubJS">PubSub</a>，一个利用JavaScript进行发布/订阅的库，</p><p>为了方便在模块化开发当中进行各个模块的数据传递，所以引入了PubSub.js库。</p><h3 id="2-消息订阅与发布机制"><a href="#2-消息订阅与发布机制" class="headerlink" title="2.消息订阅与发布机制"></a>2.消息订阅与发布机制</h3><pre><code>               1.先订阅，再发布（理解：有一种隔空对话的感觉）              2.适用于任意组件间通信                        3.要在组件的componentWillUnmount中取消订阅</code></pre><h2 id="2-PubSub安装"><a href="#2-PubSub安装" class="headerlink" title="2.PubSub安装"></a>2.PubSub安装</h2><h3 id="1-下载依赖包"><a href="#1-下载依赖包" class="headerlink" title="1.下载依赖包"></a>1.下载依赖包</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install pubsub-js </span><br><span class="line"><span class="comment">//or</span></span><br><span class="line">yarn add pubsub-js</span><br></pre></td></tr></table></figure><h3 id="2-使用外链引用"><a href="#2-使用外链引用" class="headerlink" title="2.使用外链引用"></a>2.使用外链引用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//www.jsdelivr.com/#!pubsubjs</span></span><br><span class="line">https:<span class="comment">//cdnjs.com/libraries/pubsub-js</span></span><br><span class="line">https:<span class="comment">//unpkg.com/pubsub-js</span></span><br></pre></td></tr></table></figure><h3 id="3-在组件中导入"><a href="#3-在组件中导入" class="headerlink" title="3.在组件中导入"></a>3.在组件中导入</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PubSub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// or when using CommonJS</span></span><br><span class="line"><span class="keyword">const</span> PubSub = <span class="built_in">require</span>(<span class="string">&#x27;pubsub-js&#x27;</span>);</span><br></pre></td></tr></table></figure><h3 id="4-使用PubSub"><a href="#4-使用PubSub" class="headerlink" title="4.使用PubSub"></a>4.使用PubSub</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消息发布：传递两个参数一个是接受函数的名字，一个给接受函数传递的参数</span></span><br><span class="line">  PubSub.publish(<span class="string">&#x27;fnName&#x27;</span>,data)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消息订阅：函数接受  使用一个变量token去接收,传递两个参数，一个是定义的函数名字，一个是接收的函数（接收函数里面的msg可以忽略，data就是传递过来的值）；</span></span><br><span class="line"><span class="comment">//emmm，感觉和vuex有类似的地方</span></span><br><span class="line">   <span class="built_in">this</span>.token = PubSub.subscribe(<span class="string">&#x27;fnName&#x27;</span>, <span class="function">(<span class="params">msg, data</span>) =&gt;</span> &#123;</span><br><span class="line">             <span class="built_in">console</span>.log(data);</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure><h3 id="5-案例"><a href="#5-案例" class="headerlink" title="5.案例"></a>5.案例</h3><p>​            在要使用的组件引入：**import PubSub from ‘pubsub-js’ ** ，然后在父组件的componentWillMount钩子进行消息的订阅。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React,&#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Bar <span class="keyword">from</span> <span class="string">&#x27;./components/Bar&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PubSub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      msg:<span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentWillMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// 订阅消息</span></span><br><span class="line">    PubSub.subscribe(<span class="string">&#x27;msg&#x27;</span>,<span class="function">(<span class="params">msg,data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        msg:data</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123;msg&#125; = <span class="built_in">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Bar/&gt;</span><br><span class="line">        &lt;p style=&#123;&#123;<span class="attr">color</span>:<span class="string">&#x27;red&#x27;</span>&#125;&#125;&gt;我是订阅的结果：&#123;msg&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​            在子组件/(兄弟组件)中进行发布消息，毕竟有了快递包裹的发件人，( •̀ ω •́ )y一定会有接受包裹的收件人。在这里我就以子组件为例子。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React,&#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> PubSub <span class="keyword">from</span> <span class="string">&#x27;pubsub-js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">super</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  sendMsg = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 发布消息</span></span><br><span class="line">    PubSub.publish(<span class="string">&#x27;msg&#x27;</span>,<span class="string">`我是发布的随机数：<span class="subst">$&#123;<span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random()*<span class="number">1000</span>)&#125;</span>`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="built_in">this</span>.sendMsg&#125;&gt;发布消息&lt;/button&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PubSub </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
